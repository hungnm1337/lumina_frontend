<div class="reports-container">
    <!-- Header Section -->
    <div class="header-section">
        <div class="header-content">
            <h1 class="page-title">
                <i class="fas fa-file-alt"></i>
                B√°o C√°o C·ªßa T√¥i
            </h1>
            <p class="page-subtitle">Qu·∫£n l√Ω v√† theo d√µi c√°c b√°o c√°o ƒë√£ g·ª≠i</p>
        </div>
    </div>

    <!-- Filters Section -->
    <div class="filters-section">
        <div class="filters-container">
            <!-- Type Filter -->
            <div class="filter-group">
                <label class="filter-label">Lo·∫°i b√°o c√°o:</label>
                <select [(ngModel)]="filterType" (change)="onFilterTypeChange(filterType)" class="filter-select">
                    <option *ngFor="let opt of typeOptions" [value]="opt.value">{{opt.label}}</option>
                </select>
            </div>

            <!-- Date Filter -->
            <div class="filter-group">
                <label class="filter-label">Ng√†y g·ª≠i:</label>
                <input type="date" [(ngModel)]="filterDate" (change)="onFilterDateChange(filterDate)"
                    class="filter-input" />
            </div>

            <!-- Sort -->
            <div class="filter-group">
                <label class="filter-label">S·∫Øp x·∫øp:</label>
                <select [(ngModel)]="sortDirection" (change)="onSortChange(sortDirection)" class="filter-select">
                    <option value="desc">M·ªõi nh·∫•t tr∆∞·ªõc</option>
                    <option value="asc">C≈© nh·∫•t tr∆∞·ªõc</option>
                </select>
            </div>

            <!-- Clear Button -->
            <button (click)="clearFilters()" class="btn-clear-filters">
                <i class="fas fa-times-circle"></i>
                X√≥a l·ªçc
            </button>

            <!-- Stats -->
            <div class="stats-summary">
                <div class="stat-item">
                    <i class="fas fa-file-alt"></i>
                    <span class="stat-value">{{ filteredReports.length }}</span>
                    <span class="stat-label">b√°o c√°o</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state">
        <div class="loading-spinner"></div>
        <p>ƒêang t·∫£i b√°o c√°o...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-state">
        <i class="fas fa-exclamation-circle"></i>
        <p>{{error}}</p>
    </div>

    <!-- Reports Grid -->
    <div *ngIf="!loading && !error" class="reports-section">
        <!-- Empty State -->
        <div *ngIf="filteredReports.length === 0" class="empty-state">
            <div class="empty-icon">üìÑ</div>
            <h3>Kh√¥ng c√≥ b√°o c√°o n√†o</h3>
            <p *ngIf="filterType || filterDate">Th·ª≠ thay ƒë·ªïi b·ªô l·ªçc ƒë·ªÉ xem th√™m b√°o c√°o</p>
            <p *ngIf="!filterType && !filterDate">B·∫°n ch∆∞a g·ª≠i b√°o c√°o n√†o</p>
        </div>

        <!-- Reports List -->
        <div *ngIf="filteredReports.length > 0" class="reports-grid">
            <div *ngFor="let report of filteredReports" class="report-card" (click)="onSelectReport(report)"
                [class.selected]="selectedReport?.reportId === report.reportId">
                <div class="report-card-header">
                    <div class="report-type-badge" [ngClass]="getTypeBadgeClass(report.type)">
                        <i [class]="getTypeIcon(report.type)"></i>
                        {{report.type}}
                    </div>
                    <div class="report-date">
                        <i class="fas fa-clock"></i>
                        {{report.sendAt | date:'dd/MM/yyyy'}}
                    </div>
                </div>

                <div class="report-card-body">
                    <h3 class="report-title">{{report.title}}</h3>
                    <p class="report-content-preview">{{report.content}}</p>

                    <div class="report-meta">
                        <div class="report-sender">
                            <i class="fas fa-user"></i>
                            G·ª≠i b·ªüi: {{report.sendBy}}
                        </div>
                        <div class="report-status" *ngIf="report.replyContent" [ngClass]="'status-replied'">
                            <i class="fas fa-check-circle"></i>
                            ƒê√£ ph·∫£n h·ªìi
                        </div>
                        <div class="report-status" *ngIf="!report.replyContent" [ngClass]="'status-pending'">
                            <i class="fas fa-hourglass-half"></i>
                            Ch·ªù ph·∫£n h·ªìi
                        </div>
                    </div>
                </div>

                <div class="report-card-footer">
                    <button class="btn-view-detail" (click)="onSelectReport(report)">
                        <i class="fas fa-eye"></i>
                        Xem chi ti·∫øt
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Detail Modal -->
    <div *ngIf="selectedReport" class="detail-modal-overlay" (click)="closeDetail()">
        <div class="detail-modal" (click)="$event.stopPropagation()">
            <div class="detail-modal-header">
                <h2 class="detail-title">
                    <i class="fas fa-file-alt"></i>
                    {{selectedReport.title}}
                </h2>
                <button class="btn-close" (click)="closeDetail()" aria-label="ƒê√≥ng">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="detail-modal-body">
                <div class="detail-meta">
                    <div class="meta-item">
                        <span class="meta-label">Lo·∫°i:</span>
                        <span class="meta-value type-badge" [ngClass]="getTypeBadgeClass(selectedReport.type)">
                            <i [class]="getTypeIcon(selectedReport.type)"></i>
                            {{selectedReport.type}}
                        </span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Ng∆∞·ªùi g·ª≠i:</span>
                        <span class="meta-value">{{selectedReport.sendBy}}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Ng√†y g·ª≠i:</span>
                        <span class="meta-value">{{selectedReport.sendAt | date:'dd/MM/yyyy HH:mm'}}</span>
                    </div>
                </div>

                <div class="detail-section">
                    <h3 class="section-title">
                        <i class="fas fa-align-left"></i>
                        N·ªôi dung b√°o c√°o
                    </h3>
                    <div class="content-box">{{selectedReport.content}}</div>
                </div>

                <div *ngIf="selectedReport.replyContent" class="detail-section reply-section">
                    <h3 class="section-title">
                        <i class="fas fa-reply"></i>
                        Ph·∫£n h·ªìi
                    </h3>
                    <div class="reply-box">
                        <p class="reply-content">{{selectedReport.replyContent}}</p>
                        <div class="reply-meta">
                            <span><i class="fas fa-user"></i> {{selectedReport.replyBy}}</span>
                            <span><i class="fas fa-clock"></i> {{selectedReport.replyAt | date:'dd/MM/yyyy
                                HH:mm'}}</span>
                        </div>
                    </div>
                </div>

                <div *ngIf="!selectedReport.replyContent" class="detail-section pending-section">
                    <div class="pending-notice">
                        <i class="fas fa-hourglass-half"></i>
                        <p>B√°o c√°o n√†y ƒëang ch·ªù ph·∫£n h·ªìi t·ª´ qu·∫£n l√Ω</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>