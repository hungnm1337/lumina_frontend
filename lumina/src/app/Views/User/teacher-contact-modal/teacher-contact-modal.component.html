@if (isVisible) {
<div class="modal-overlay" (click)="onBackdropClick($event)">
  <div class="modal-content">
    <!-- Close Button -->
    <button
      (click)="onClose()"
      class="close-button"
      aria-label="Close modal"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </button>

    <!-- Header -->
    <div class="modal-header">
      
      <h2 class="modal-title">Chuyển sang chấm thủ công</h2>
      <p class="modal-subtitle">
        Liên hệ với giáo viên để được chấm bài và đánh giá chi tiết
      </p>
    </div>

    <!-- Content -->
    <div class="modal-body">
    

      <!-- Teacher Cards -->
      @for (teacher of teachers; track teacher.email) {
      <div class="teacher-card">
        <div class="teacher-header">
          <div class="teacher-avatar">
            <svg
              class="w-8 h-8 text-white"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                clip-rule="evenodd"
              />
            </svg>
          </div>
          <div class="teacher-info">
            <h3 class="teacher-name">{{ teacher.name }}</h3>
            @if (teacher.title) {
            <p class="teacher-title">{{ teacher.title }}</p>
            }
          </div>
        </div>

        <div class="contact-details">
          <!-- Email -->
          <div class="contact-item">
            <div class="contact-icon email-icon">
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                />
              </svg>
            </div>
            <div class="contact-content">
              <span class="contact-label">Email</span>
              <a
                [href]="'mailto:' + teacher.email"
                class="contact-value contact-link"
              >
                {{ teacher.email }}
              </a>
            </div>
            <button
              (click)="copyToClipboard(teacher.email, 'Email')"
              class="copy-button"
              title="Copy email"
            >
              <svg
                class="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                />
              </svg>
            </button>
          </div>

          <!-- Phone -->
          <div class="contact-item">
            <div class="contact-icon phone-icon">
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                />
              </svg>
            </div>
            <div class="contact-content">
              <span class="contact-label">Điện thoại</span>
              <a
                [href]="getPhoneLink(teacher.phone)"
                class="contact-value contact-link"
              >
                {{ teacher.phone }}
              </a>
            </div>
            <button
              (click)="copyToClipboard(teacher.phone, 'Phone')"
              class="copy-button"
              title="Copy phone number"
            >
              <svg
                class="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
      }
    </div>

    <!-- Footer -->
    <div class="modal-footer">
      <button (click)="onClose()" class="ok-button">
        <svg
          class="w-5 h-5 mr-2"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 13l4 4L19 7"
          />
        </svg>
        Đã hiểu
      </button>
    </div>
  </div>
</div>
}
