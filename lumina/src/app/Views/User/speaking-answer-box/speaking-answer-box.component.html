<div class="speaking-answer-container">
  <!-- INFORMATION PHASE (Part 4 Q8 only) -->
  @if (timerService.phase$ | async; as phase) {
    @if (phase === 'information') {
      <div class="text-center py-8">
        <div class="mb-4">
          <i class="fas fa-info-circle text-blue-600 text-6xl"></i>
        </div>
        
        <h3 class="text-2xl font-semibold text-gray-800 mb-2">
          üìã ƒê·ªçc th√¥ng tin sau ƒë√¢y
        </h3>
        
        <div class="text-5xl font-mono font-bold text-blue-600 mb-4">
          {{ timerService.infoTimeRemaining$ | async }}s
        </div>
        
        <div class="w-full bg-gray-200 rounded-full h-3 mb-4">
          <div 
            class="bg-blue-600 h-3 rounded-full transition-all duration-300"
            [style.width.%]="(((timerService.infoTimeRemaining$ | async) ?? 0) / infoReadTime) * 100">
          </div>
        </div>
        
        <div class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md text-blue-700 text-sm">
          <i class="fas fa-clock mr-1"></i>
          B·∫£ng th√¥ng tin s·∫Ω hi·ªÉn th·ªã trong su·ªët Part 4
        </div>
      </div>
    }
    
    <!-- PREPARATION PHASE -->
    @if (phase === 'preparation') {
      <div class="text-center py-8">
        <div class="mb-4">
          <i class="fas fa-book-reader text-blue-600 text-6xl"></i>
        </div>
        
        <h3 class="text-2xl font-semibold text-gray-800 mb-2">
          Th·ªùi gian chu·∫©n b·ªã
        </h3>
        
        <div class="text-6xl font-mono font-bold text-blue-600 mb-4">
          {{ timerService.prepTimeRemaining$ | async }}s
        </div>
        
        <p class="text-gray-600 mb-4">
          ƒê·ªçc k·ªπ c√¢u h·ªèi. Ghi √¢m s·∫Ω t·ª± ƒë·ªông b·∫Øt ƒë·∫ßu khi h·∫øt gi·ªù.
        </p>
        
        <!-- Progress bar -->
        <div class="w-full bg-gray-200 rounded-full h-3">
          <div 
            class="bg-blue-600 h-3 rounded-full transition-all duration-300"
            [style.width.%]="(((timerService.prepTimeRemaining$ | async) ?? 0) / preparationTime) * 100">
          </div>
        </div>
        
        <div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md text-yellow-700 text-sm">
          <i class="fas fa-lock mr-1"></i>
          Kh√¥ng th·ªÉ b·∫Øt ƒë·∫ßu ghi √¢m th·ªß c√¥ng - h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông b·∫Øt ƒë·∫ßu
        </div>
      </div>
    }
    
    <!-- RECORDING PHASE -->
    @if (phase === 'recording') {
      <div class="text-center py-8">
        <div class="mb-4">
          <div class="inline-block relative">
            <i class="fas fa-microphone text-red-600 text-6xl animate-pulse"></i>
            <span class="absolute -top-1 -right-1 flex h-5 w-5">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
              <span class="relative inline-flex rounded-full h-5 w-5 bg-red-500"></span>
            </span>
          </div>
        </div>
        
        <h3 class="text-2xl font-semibold text-gray-800 mb-2">
          ƒêang ghi √¢m...
        </h3>
        
        <div class="text-6xl font-mono font-bold text-red-600 mb-2">
          {{ timerService.recordTimeRemaining$ | async }}s
        </div>
        
        <p class="text-sm text-gray-600 mb-4">
          Th·ªùi gian c√≤n l·∫°i ƒë·ªÉ tr·∫£ l·ªùi
        </p>
        
        <!-- Progress bar -->
        <div class="w-full bg-gray-200 rounded-full h-3 mb-4">
          <div 
            class="bg-red-600 h-3 rounded-full transition-all duration-300"
            [style.width.%]="((recordingTime - ((timerService.recordTimeRemaining$ | async) ?? recordingTime)) / recordingTime) * 100">
          </div>
        </div>
        
        <div class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md text-blue-700 text-sm">
          <i class="fas fa-info-circle mr-1"></i>
          T·ª± ƒë·ªông d·ª´ng v√† chuy·ªÉn c√¢u ti·∫øp theo khi h·∫øt th·ªùi gian
        </div>
      </div>
    }
  }
  
  <!-- PROCESSING - ƒêang ch·∫•m ƒëi·ªÉm -->
  @if (isProcessing) {
    <div class="text-center py-8">
      <div class="mb-4">
        <svg
          class="animate-spin h-16 w-16 mx-auto text-blue-600"
          fill="none"
          viewBox="0 0 24 24"
        >
          <circle
            class="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            stroke-width="4"
          ></circle>
          <path
            class="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
          ></path>
        </svg>
      </div>
      
      <h3 class="text-lg font-semibold text-gray-800 mb-2">ƒêang ch·∫•m ƒëi·ªÉm...</h3>
      <p class="text-sm text-gray-600">Vui l√≤ng ƒë·ª£i trong gi√¢y l√°t</p>
      
      <div
        class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md text-yellow-700 text-sm"
      >
        <i class="fas fa-hourglass-half mr-1"></i>
        H·ªá th·ªëng ƒëang ph√¢n t√≠ch ph√°t √¢m, ng·ªØ ph√°p v√† n·ªôi dung c·ªßa b·∫°n
      </div>
    </div>
  }
  
  <!-- SUBMITTED - ƒê√£ n·ªôp b√†i, ƒëang ch·ªù k·∫øt qu·∫£ -->
  @if (isSubmitted && !result) {
    <div class="text-center py-8">
      <div class="mb-4">
        <i class="fas fa-paper-plane text-blue-600 text-6xl"></i>
      </div>
      
      <h3 class="text-lg font-semibold text-gray-800 mb-2">ƒê√£ n·ªôp b√†i</h3>
      <p class="text-sm text-gray-600">H·ªá th·ªëng ƒëang ch·∫•m ƒëi·ªÉm trong n·ªÅn</p>
      
      <div
        class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md text-blue-700 text-sm"
      >
        <i class="fas fa-info-circle mr-1"></i>
        K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã khi ho√†n t·∫•t. B·∫°n c√≥ th·ªÉ l√†m c√¢u kh√°c trong l√∫c ch·ªù.
      </div>
    </div>
  }
  
  <!-- SUBMITTED with Result - ƒê√£ ch·∫•m xong -->
  @if (isSubmitted && result) {
    <div class="py-6">
      <div class="mb-4 p-4 bg-green-50 border-2 border-green-300 rounded-lg">
        <div class="text-center">
          <i class="fas fa-check-circle text-green-600 text-5xl mb-3"></i>
          <h3 class="text-xl font-bold text-green-800 mb-2">
            ƒê√£ ch·∫•m ƒëi·ªÉm xong cho c√¢u n√†y!
          </h3>
          <p class="text-gray-700 mb-3">
            C√¢u tr·∫£ l·ªùi c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c ch·∫•m ƒëi·ªÉm th√†nh c√¥ng.
          </p>
        </div>
      </div>
    </div>
  }
  
  <!-- ERROR State -->
  @if (isError && errorMessage) {
    <div class="text-center py-8">
      <div class="mb-4">
        <i class="fas fa-exclamation-triangle text-red-600 text-6xl"></i>
      </div>
      
      <h3 class="text-xl font-semibold text-red-800 mb-2">
        ƒê√£ x·∫£y ra l·ªói
      </h3>
      
      <div class="mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-700">
        {{ errorMessage }}
      </div>
      
      <p class="text-sm text-gray-600">
        Vui l√≤ng li√™n h·ªá h·ªó tr·ª£ n·∫øu l·ªói v·∫´n ti·∫øp t·ª•c.
      </p>
    </div>
  }
</div>
