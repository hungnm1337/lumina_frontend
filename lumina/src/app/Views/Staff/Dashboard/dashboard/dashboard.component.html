<div class="dashboard-container">
  <!-- Loading State -->
  <div class="loading-overlay" *ngIf="isLoading">
    <div class="loading-content">
      <i class="fas fa-spinner fa-spin fa-2x"></i>
      <p>ƒêang t·∫£i d·ªØ li·ªáu dashboard...</p>
    </div>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="error && !isLoading">
    <div class="error-content">
      <i class="fas fa-exclamation-triangle fa-2x"></i>
      <h3>C√≥ l·ªói x·∫£y ra</h3>
      <p>{{ error }}</p>
      <button class="btn-retry" (click)="refreshData()">
        <i class="fas fa-redo"></i>
        Th·ª≠ l·∫°i
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading && !error">
    <!-- Welcome Header -->
    <div class="welcome-header">
      <div class="welcome-content">
        <h1>Ch√†o m·ª´ng tr·ªü l·∫°i! üëã</h1>
        <p>H√¥m nay l√† {{ getCurrentDate() }}. H√£y ti·∫øp t·ª•c t·∫°o n√™n nh·ªØng n·ªôi dung h·ªçc t·∫≠p ch·∫•t l∆∞·ª£ng.</p>
      </div>
      <div class="welcome-stats">
        <div class="stat-item">
          <span class="stat-number">{{ getTotalContent() | number }}</span>
          <span class="stat-label">T·ªïng n·ªôi dung</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ getThisMonthContent() | number }}</span>
          <span class="stat-label">Th√°ng n√†y</span>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions-section">
      <h2 class="section-title">T√°c v·ª• nhanh</h2>
      <div class="quick-actions-grid">
        <div *ngFor="let action of quickActions" class="quick-action-card" [class]="'color-' + action.color" (click)="navigateTo(action.route)">
          <div class="action-icon"><i [class]="action.icon"></i></div>
          <div class="action-content">
            <h3>{{ action.title }}</h3>
            <p>{{ action.description }}</p>
          </div>
          <div class="action-arrow"><i class="fas fa-arrow-right"></i></div>
        </div>
      </div>
    </div>

    <!-- Stats Overview -->
    <div class="stats-section">
      <h2 class="section-title">T·ªïng quan th·ªëng k√™</h2>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-header">
            <div class="stat-icon purple"><i class="fas fa-edit"></i></div>
            <div class="stat-trend" [class.positive]="getGrowthPercentage(staffStats.articlesThisMonth, staffStats.articlesLastMonth) >= 0" [class.negative]="getGrowthPercentage(staffStats.articlesThisMonth, staffStats.articlesLastMonth) < 0">
              <i [class]="getGrowthPercentage(staffStats.articlesThisMonth, staffStats.articlesLastMonth) >= 0 ? 'fas fa-arrow-up' : 'fas fa-arrow-down'"></i>
              <span>{{ getGrowthPercentage(staffStats.articlesThisMonth, staffStats.articlesLastMonth) | number:'1.0-1' }}%</span>
            </div>
          </div>
          <div class="stat-content">
            <h3>{{ staffStats.totalArticles | number }}</h3>
            <p>B√†i vi·∫øt</p>
            <div class="stat-detail"><span>{{ staffStats.articlesThisMonth | number }} th√°ng n√†y</span></div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-header">
            <div class="stat-icon blue"><i class="fas fa-question-circle"></i></div>
            <div class="stat-trend" [class.positive]="getGrowthPercentage(staffStats.questionsThisMonth, staffStats.questionsLastMonth) >= 0" [class.negative]="getGrowthPercentage(staffStats.questionsThisMonth, staffStats.questionsLastMonth) < 0">
              <i [class]="getGrowthPercentage(staffStats.questionsThisMonth, staffStats.questionsLastMonth) >= 0 ? 'fas fa-arrow-up' : 'fas fa-arrow-down'"></i>
              <span>{{ getGrowthPercentage(staffStats.questionsThisMonth, staffStats.questionsLastMonth) | number:'1.0-1' }}%</span>
            </div>
          </div>
          <div class="stat-content">
            <h3>{{ staffStats.totalQuestions | number }}</h3>
            <p>C√¢u h·ªèi</p>
            <div class="stat-detail"><span>{{ staffStats.questionsThisMonth | number }} th√°ng n√†y</span></div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-header">
            <div class="stat-icon green"><i class="fas fa-clipboard-list"></i></div>
            <div class="stat-trend" [class.positive]="getGrowthPercentage(staffStats.testsThisMonth, staffStats.testsLastMonth) >= 0" [class.negative]="getGrowthPercentage(staffStats.testsThisMonth, staffStats.testsLastMonth) < 0">
              <i [class]="getGrowthPercentage(staffStats.testsThisMonth, staffStats.testsLastMonth) >= 0 ? 'fas fa-arrow-up' : 'fas fa-arrow-down'"></i>
              <span>{{ getGrowthPercentage(staffStats.testsThisMonth, staffStats.testsLastMonth) | number:'1.0-1' }}%</span>
            </div>
          </div>
          <div class="stat-content">
            <h3>{{ staffStats.totalTests | number }}</h3>
            <p>B√†i thi</p>
            <div class="stat-detail"><span>{{ staffStats.testsThisMonth | number }} th√°ng n√†y</span></div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-header">
            <div class="stat-icon orange"><i class="fas fa-spell-check"></i></div>
            <div class="stat-trend" [class.positive]="getGrowthPercentage(staffStats.vocabularyThisMonth, staffStats.vocabularyLastMonth) >= 0" [class.negative]="getGrowthPercentage(staffStats.vocabularyThisMonth, staffStats.vocabularyLastMonth) < 0">
              <i [class]="getGrowthPercentage(staffStats.vocabularyThisMonth, staffStats.vocabularyLastMonth) >= 0 ? 'fas fa-arrow-up' : 'fas fa-arrow-down'"></i>
              <span>{{ getGrowthPercentage(staffStats.vocabularyThisMonth, staffStats.vocabularyLastMonth) | number:'1.0-1' }}%</span>
            </div>
          </div>
          <div class="stat-content">
            <h3>{{ staffStats.totalVocabulary | number }}</h3>
            <p>T·ª´ v·ª±ng</p>
            <div class="stat-detail"><span>{{ staffStats.vocabularyThisMonth | number }} th√°ng n√†y</span></div>
          </div>
        </div>
        
      </div>
    </div>

    <!-- Left/Right Columns -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6">
      <!-- Recent Activities (Left Column) -->
      <div class="lg:col-span-2">
        <div class="activities-section">
          <div class="section-header">
            <h2 class="section-title">Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h2>
            <button class="btn-view-all-header"><i class="fas fa-external-link-alt"></i> Xem t·∫•t c·∫£</button>
          </div>
          <div class="activities-list">
            <div *ngFor="let activity of recentActivities" class="activity-item">
              <div class="activity-icon" [class]="'color-' + getActivityColor(activity.type)"><i [class]="getActivityIcon(activity.type)"></i></div>
              <div class="activity-content">
                <h4>{{ activity.action }}</h4>
                <p>{{ activity.title }}</p>
                <div class="activity-meta">
                  <span class="activity-time"><i class="fas fa-clock"></i> {{ activity.timestamp }}</span>
                  <span class="activity-status" [class]="getStatusBadge(activity.status)">{{ getStatusText(activity.status) }}</span>
                </div>
              </div>
            </div>
            <div *ngIf="recentActivities.length === 0" class="text-center py-6 text-gray-500">
                <i class="fas fa-history fa-2x"></i>
                <p class="mt-2">Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o g·∫ßn ƒë√¢y.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Metrics (Right Column) -->
      <div class="lg:col-span-1">
        <div class="quick-stats-section">
          <h2 class="section-title">Ch·ªâ s·ªë hi·ªáu su·∫•t</h2>
          <div class="quick-stats-grid">
            <div class="quick-stat-card productivity">
              <div class="quick-stat-icon"><i class="fas fa-chart-line"></i></div>
              <div class="quick-stat-content">
                <h4>TƒÉng tr∆∞·ªüng nƒÉng su·∫•t</h4>
                <p class="stat-value">{{ metrics.productivityGrowth >= 0 ? '+' : '' }}{{ metrics.productivityGrowth | number:'1.0-1' }}%</p>
                <span class="stat-label">So v·ªõi th√°ng tr∆∞·ªõc</span>
              </div>
            </div>
            <div class="quick-stat-card engagement">
              <div class="quick-stat-icon"><i class="fas fa-users"></i></div>
              <div class="quick-stat-content">
                <h4>L∆∞·ª£t t∆∞∆°ng t√°c</h4>
                <p class="stat-value">{{ metrics.contentLikes | number }}</p>
                <span class="stat-label">T·ªïng l∆∞·ª£t l√†m b√†i</span>
              </div>
            </div>
            <div class="quick-stat-card quality">
              <div class="quick-stat-icon"><i class="fas fa-star"></i></div>
              <div class="quick-stat-content">
                <h4>ƒêi·ªÉm ch·∫•t l∆∞·ª£ng</h4>
                <p class="stat-value">{{ metrics.qualityRating }}/5</p>
                <span class="stat-label">ƒê√°nh gi√° trung b√¨nh</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
